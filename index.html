<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Điều kì diệu ở phòng giam số 1307</title>

    <link rel="icon" type="image/png" sizes="96x96" href="assets/favicon/favicon-96x96.png" />
    <link rel="icon" type="image/svg+xml" href="assets/favicon/favicon.svg" />
    <link rel="shortcut icon" href="assets/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="1307" />
    <link rel="manifest" href="assets/favicon/site.webmanifest" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap" />
    <link rel="stylesheet" href="styles.css" />

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.min.js"></script>
</head>

<body>
    <header>
        <i class="fas fa-bars menu-icon" onclick="testt();"></i>
        <div class="profile">
            <button class="select-buyer-btn" onclick="openForm('headerMemberPopup')">Mày là ai ???</button>
            <i class="fas fa-sun theme-toggle"></i>
            <img alt="User profile picture" src="assets/avatarDefault.png" />
        </div>
    </header>
    <div class="container">
        <main>
            <section id="schedule">
                <div class="schedule">
                    <h2>Lịch trực vệ sinh</h2>
                    <ul>
                        <li><span>Thứ 2</span></li>
                        <li><span>Thứ 3</span></li>
                        <li><span>Thứ 4</span></li>
                        <li><span>Thứ 5</span></li>
                        <li><span>Thứ 6</span></li>
                        <li><span>Thứ 7</span></li>
                        <li><span>Chủ nhật</span></li>
                    </ul>
                </div>
            </section>
            <section id="expenses">
                <div class="expenses">
                    <h2>Chi tiêu</h2>
                    <ul></ul>
                    <button class="add-btn" onclick="openForm('addExpensePopup')">
                        <i class="fas fa-plus"></i>
                    </button>
                    <input type="hidden" name="allExpenses" id="allExpenses">
                </div>
            </section>
            <section id="rent">
                <div class="rent">
                    <h2>Tính tiền</h2>
                    <form id="rentForm">
                        <div class="rent-select">
                            <select name="rentMonthYear" id="rentMonthYear">
                                <option value="">Chọn tháng tính tiền nhà</option>
                                <optgroup value="2025" label="2025">
                                    <option value="1" label="1"></option>
                                    <option value="2" label="2"></option>
                                </optgroup>
                                <optgroup value="2024" label="2024">
                                    <option value="1" label="1"></option>
                                    <option value="2" label="2"></option>
                                    <option value="3" label="3"></option>
                                </optgroup>
                            </select>
                        </div>
                        <h3>Phí chung</h3>
                        <div class="rent-fields">
                            <div class="field house">
                                <label for="rentHouse">Tiền thuê nhà</label>
                                <input type="number" name="rentHouse" id="rentHouse" placeholder="Tiền thuê nhà">
                            </div>
                            <div class="field managementFee">
                                <label for="rentManagementFee">Phí quản lý</label>
                                <input type="number" name="rentManagementFee" id="rentManagementFee"
                                    placeholder="Phí quản lý">
                            </div>
                            <div class="field electricity">
                                <label for="rentElectricity">Tiền điện</label>
                                <input type="number" name="rentElectricity" id="rentElectricity"
                                    placeholder="Tiền điện">
                            </div>
                            <div class="field water">
                                <label for="rentWater">Tiền nước</label>
                                <input type="number" name="rentWater" id="rentWater" placeholder="Tiền nước">
                            </div>
                            <div class="field otherFee">
                                <label for="rentOtherFee">Phí khác</label>
                                <input type="number" name="rentOtherFee" id="rentOtherFee" placeholder="Phí khác">
                                <input type="text" name="rentOtherFeeNote" id="rentOtherFeeNote" placeholder="Ghi chú">
                            </div>
                        </div>
                        <h3>Phí riêng</h3>
                        <div class="rent-members">
                            <ul class="rent-members-list">
                            </ul>
                        </div>
                        <button class="add-btn" type="submit">
                            <i class="fas fa-plus"></i>
                        </button>
                    </form>
                </div>
            </section>
            <section id="members">
                <div class="members">
                    <h2>Người trong gian nhà</h2>
                    <ul></ul>
                    <button class="add-btn" onclick="openForm('addMemberPopup')">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </section>
        </main>
    </div>
    <nav>
        <ul>
            <li>
                <a href="#schedule" class="nav-item">
                    <i class="fas fa-calendar-alt"></i>
                </a>
            </li>
            <li>
                <a href="#expenses" class="nav-item">
                    <i class="fas fa-credit-card"></i>
                </a>
            </li>
            <li>
                <a href="#rent" class="nav-item">
                    <i class="fas fa-dollar-sign"></i>
                </a>
            </li>
            <li>
                <a href="#members" class="nav-item">
                    <i class="fas fa-user"></i>
                </a>
            </li>
        </ul>
    </nav>
    <div class="overlay" onclick="closeForm();"></div>
    <div id="headerMemberPopup" class="popup-form">
        <h2>Tao là...</h2>
        <ul></ul>
        <button class="close-btn" onclick="closeForm()" type="button">Đóng</button>
    </div>
    <div id="addExpensePopup" class="popup-form">
        <form onsubmit="upsertExpense(event)" id="upsertExpenseForm">
            <input type="text" id="expensesItemName" name="expensesItemName" placeholder="Mua gì?" required />
            <input type="number" id="expensesPrice" name="expensesPrice" placeholder="Nhiêu?" min="0" required />
            <select id="expensesMemberId" name="expensesMemberId" title="M là ai???"></select>
            <input type="date" id="expensesPurchaseDate" name="expensesPurchaseDate" placeholder="Hồi nàooo?"
                required />
            <input type="hidden" id="expensesId" name="expensesId">
            <button type="submit">Thêm</button>
            <button class="close-btn" onclick="closeForm()" type="button">Đóng</button>
        </form>
    </div>
    <div id="addMemberPopup" class="popup-form">
        <form onsubmit="upsertMember(event)" id="upsertMemberForm">
            <input type="text" id="memberName" name="memberName" placeholder="Tên" required>
            <input type="number" name="memberDefaultParkingFee" id="memberDefaultParkingFee"
                placeholder="Phí giữ xe mặc định" data-tooltip="Phí giữ xe. Không có xe thì khỏi nhập">
            <input type="number" name="memberDefaultOtherFee" id="memberDefaultOtherFee" placeholder="Phí mặc định khác"
                data-tooltip="Phí khác. Không có thì thoi">
            <img src="assets/avatarDefault.png" alt=" " id="memberAvatarPreview">
            <input type="file" id="memberAvatar" name="memberAvatar" accept="image/*" style="display: none;">
            <input type="hidden" id="memberId" name="memberId">
            <input type="hidden" id="memberOldImageUrl" name="memberOldImageUrl">
            <button type="submit">Thêm</button>
            <button class="close-btn" onclick="closeForm()" type="button">Đóng</button>
        </form>
    </div>
    <div id="messageConfirmPopup" class="popup-form">
        <h2 id="confirmMessage">Bạn có chắc chắn?</h2>
        <button id="confirmYes">Có</button>
        <button id="confirmNo" class="close-btn">Không</button>
    </div>
    <div class="tooltip-footer" id="tooltip"></div>
    <script src="script/services/supabaseService.js"></script>
    <script src="script/controller/membersController.js"></script>
    <script src="script/controller/scheduleController.js"></script>
    <script src="script/controller/expensesController.js"></script>
    <script src="script/controller/rentController.js"></script>
    <script src="script/script.js"></script>
    <!-- <script src="script/scriptTest.js"></script> -->
</body>

</html>